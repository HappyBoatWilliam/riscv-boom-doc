\chapter{Physical Realization}\label{chapter:physical}

This chapter provides information useful for physical realizing the BOOM processor.

\section{Register Retiming}
 
Many VLSI tools require the designer to manually specify which modules need to
be analyzed for retiming. 
                 
In BOOM, the floating point units and the pipelined integer multiply unit are
described combinationally and then padded to the requested latency with
registers.
In order to meet the desired clock frequency, The floating point units and the
pipelined integer multiply unit must be register-retimed. 
 
\begin{center}
\begin{minipage}{0.90\textwidth}
\begin{lstlisting}[caption=Pipelined integer multiply unit required register retiming to be realized properly.]
val mul_result = lhs.toSInt * rhs.toSInt
                                                                               
val mul_output_mux = MuxCase(                                                  
   UInt(0, 64), Array(                                                         
      FN(DW_64, FN_MUL)    -> mul_result(63,0),                                
      FN(DW_64, FN_MULH)   -> mul_result(127,64),                              
      FN(DW_64, FN_MULHU)  -> mul_result(127,64),                              
      FN(DW_64, FN_MULHSU) -> mul_result(127,64),                              
      FN(DW_32, FN_MUL)    -> Cat(Fill(32, mul_result(31)), mul_result(31,0)), 
      FN(DW_32, FN_MULH)   -> Cat(Fill(32, mul_result(63)), mul_result(63,32)),
      FN(DW_32, FN_MULHU)  -> Cat(Fill(32, mul_result(63)), mul_result(63,32)),
      FN(DW_32, FN_MULHSU) -> Cat(Fill(32, mul_result(63)), mul_result(63,32)) 
))                                                                             
                                                                               
io.out := ShiftRegister(mul_output_mux, imul_stages, io.valid)                 
\end{lstlisting}\label{code:pipeview}
\end{minipage}
\end{center}

\section{Pipelining Configuration Options}


\TODO{...}
 
